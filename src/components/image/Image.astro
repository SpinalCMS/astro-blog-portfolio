---
import { getDimensions, buildPublicPath, getMetadata } from '@/functions/Image'

// props
export interface Props {
    file: string;
    classes?: string;
    alt?: string;
}
const { file, classes, alt } = Astro.props;

const url = buildPublicPath(file);
const dimensions = getDimensions(file); // get the image dimensions
const caption = await getMetadata(file, "caption"); // grab the caption from the image to use as an alt tag
---

<img
    data-src={url}
    class={classes}
    alt={alt ? alt : caption}
    width={dimensions.width}
    height={dimensions.height}
>