---
// modules
import { SEO } from "astro-seo";

// components
import BaseHead from "@/components/BaseHead"
import BaseLayout from "@/components/BaseLayout"
import Heading from "@/components/Heading"
import Content from "@/components/Content"
import Container from "@/components/Container"
import ShootSnippet from "@/components/ShootSnippet"
import Pagination from "@/components/Pagination"

// config
import { photoSize } from "@/src/config.ts"

export async function getStaticPaths({ paginate }) {
    const allShoots = await Astro.glob("./*.md")
    const filteredShoots = allShoots.sort((a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf());

    return paginate(filteredShoots, { pageSize: photoSize });
}

const { page } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
    <BaseHead />
    <SEO
        title="Car Photography in Austin, TX"
        description="During the summer months you'll catch me shootin photos at Cars and Coffee at COTA or Coffee With Cars in Dripping Springs. I also do freelance photography for Bring a Trailer auctions."
    />
</head>

<body>
    <BaseLayout>
        <Container>
            <Heading>
                <h1 slot="heading">Photos</h1>
                <p>Lately, I've been shooting lots of cars for Bring a Trailer auctions. If you're in the Austin area and are interested in having your car photographed for an online auction site, <a href="/contact" title="Contact Me">let's chat!</a></p>
            </Heading>
        </Container>
        
        <Container>
            <Content>
                <section class="grid grid-cols-1 gap-12">
                    {page.data.map(s =>
                        <ShootSnippet shoot={s} />
                    )}
                </section>

                <Pagination page={page} />
            </Content>
        </Container>
    </BaseLayout>
</body>
</html>
