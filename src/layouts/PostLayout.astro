---
// modules
import { SEO } from "astro-seo";

// components
import BaseHead from "@/components/BaseHead"
import BaseLayout from "@/components/BaseLayout"
import Heading from "@/components/Heading"
import Content from "@/components/Content"
import Container from "@/components/Container"
import Image from "@/components/image/Image"
import Caption from "@/components/Image/Caption"
import Tags from "@/components/Tags"
import TOC from "@/components/TableOfContents"

// functions
import { fullDate } from "@/functions/DateTime"

// props
export interface Props {
    content: {
        hero?: string;
    };
}
const { content } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
    <BaseHead />
    <SEO
        title={content.title}
        description={content.description}
    />
</head>

<body>
    <BaseLayout>
        <Container>
            <Heading>
                <h1 slot="heading">{content.title}</h1>
                <p slot="description">{content.description}</p>
            </Heading>
        </Container>

        { content.hero ? 
            <Container>
                <figure>
                    <Image file={content.hero} />
                    <figcaption>
                        <Caption file={content.hero} />
                    </figcaption>
                </figure>
            </Container>
        : `` }

        <Container>
                <Content>
                    <div class="prose md:prose-lg xl:prose-xl">
                        <slot />
                    </div>
                </Content>

                <div class="meta">
                    <h4>Post Meta</h4>
                    <p>Posted on <time datetime={content.date}>{fullDate(content.date)}</time></p>
                    <p>Filed under <span style="text-transform: capitalize"><a href={`/blog/categories/${content.category}`} title={`Posts categorized under ${content.category}`}>{content.category}</a></span></p>
                    
                    <div class="tags">
                        <p>Tagged in</p>
                        <Tags tags={content.tags} base="blog" />
                    </div>
                </div>

                { content.astro.headers.length ?
                <div class="toc">
                        <h4>Contents</h4>
                        <TOC headers={content.astro.headers} />
                    </div>
                    : ``}
        </Container>
    </BaseLayout>
</body>
</html>